-- R2 BaseStation trigger
ON EVENT RECV(m)
IF (m MATCHES M_LREQ) (
SEND(children, M_SAMPLE)
) ELSE IF (
m MATCHES M_L(x)
) (
ADD_TO_AVG(light, x);
SET c += 1;
IF (c == LEN(children)) (
IF (light > 80)
SEND(R1, M_L(light));
SET c = 0
)
)
